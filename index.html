<!DOCTYPE html>
<html lang="th">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>‡∏£‡∏∞‡∏ö‡∏ö‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏¢‡∏≤‡∏ô‡∏±‡∏Å‡πÄ‡∏£‡∏µ‡∏¢‡∏ô‡∏õ‡∏£‡∏∞‡∏à‡∏≥</title>
    <style>
        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
            background: white;
            border-radius: 15px;
            box-shadow: 0 20px 40px rgba(0,0,0,0.1);
            overflow: hidden;
        }

        .header {
            background: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%);
            color: white;
            padding: 30px;
            text-align: center;
        }

        .header h1 {
            font-size: 2.5em;
            margin-bottom: 10px;
        }

        .nav-tabs {
            display: flex;
            background: #f8f9fa;
            border-bottom: 2px solid #dee2e6;
        }

        .nav-tab {
            flex: 1;
            padding: 15px 20px;
            background: none;
            border: none;
            cursor: pointer;
            font-size: 16px;
            font-weight: 500;
            transition: all 0.3s ease;
        }

        .nav-tab.active {
            background: white;
            color: #007bff;
            border-bottom: 3px solid #007bff;
        }

        .nav-tab:hover {
            background: #e9ecef;
        }

        .content {
            padding: 30px;
        }

        .tab-content {
            display: none;
        }

        .tab-content.active {
            display: block;
        }

        .section-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 25px;
            padding-bottom: 15px;
            border-bottom: 2px solid #e9ecef;
        }

        .section-title {
            font-size: 1.8em;
            color: #2c3e50;
            font-weight: 600;
        }

        .btn {
            padding: 12px 24px;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-size: 14px;
            font-weight: 500;
            transition: all 0.3s ease;
            display: inline-flex;
            align-items: center;
            gap: 8px;
        }

        .btn-primary {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
        }

        .btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 15px rgba(102, 126, 234, 0.4);
        }

        .btn-success {
            background: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%);
            color: white;
        }

        .btn-warning {
            background: linear-gradient(135deg, #fa709a 0%, #fee140 100%);
            color: white;
        }

        .btn-danger {
            background: linear-gradient(135deg, #ff6b6b 0%, #ee5a24 100%);
            color: white;
        }

        .btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 15px rgba(0,0,0,0.2);
        }

        .search-box {
            margin-bottom: 20px;
        }

        .search-input {
            width: 100%;
            padding: 12px 20px;
            border: 2px solid #e9ecef;
            border-radius: 8px;
            font-size: 16px;
            transition: border-color 0.3s ease;
        }

        .search-input:focus {
            outline: none;
            border-color: #007bff;
            box-shadow: 0 0 0 3px rgba(0,123,255,0.1);
        }

        .table-container {
            background: white;
            border-radius: 10px;
            overflow: hidden;
            box-shadow: 0 4px 6px rgba(0,0,0,0.07);
        }

        table {
            width: 100%;
            border-collapse: collapse;
        }

        th, td {
            padding: 15px;
            text-align: left;
            border-bottom: 1px solid #e9ecef;
        }

        th {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        tr:hover {
            background: #f8f9fa;
        }

        .modal {
            display: none;
            position: fixed;
            z-index: 1000;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.5);
            backdrop-filter: blur(5px);
        }

        .modal-content {
            background: white;
            margin: 5% auto;
            padding: 0;
            border-radius: 15px;
            width: 90%;
            max-width: 600px;
            box-shadow: 0 20px 40px rgba(0,0,0,0.2);
            animation: modalSlideIn 0.3s ease;
        }

        @keyframes modalSlideIn {
            from { transform: translateY(-50px); opacity: 0; }
            to { transform: translateY(0); opacity: 1; }
        }

        .modal-header {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 20px 30px;
            border-radius: 15px 15px 0 0;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .modal-header h2 {
            margin: 0;
            font-size: 1.5em;
        }

        .close {
            color: white;
            font-size: 28px;
            font-weight: bold;
            cursor: pointer;
            line-height: 1;
        }

        .close:hover {
            opacity: 0.7;
        }

        .modal-body {
            padding: 30px;
        }

        .form-group {
            margin-bottom: 20px;
        }

        .form-label {
            display: block;
            margin-bottom: 8px;
            font-weight: 600;
            color: #2c3e50;
        }

        .form-control {
            width: 100%;
            padding: 12px 15px;
            border: 2px solid #e9ecef;
            border-radius: 8px;
            font-size: 16px;
            transition: all 0.3s ease;
        }

        .form-control:focus {
            outline: none;
            border-color: #007bff;
            box-shadow: 0 0 0 3px rgba(0,123,255,0.1);
        }

        .form-row {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
        }

        .alert {
            padding: 15px 20px;
            margin-bottom: 20px;
            border-radius: 8px;
            font-weight: 500;
        }

        .alert-success {
            background: #d4edda;
            color: #155724;
            border: 1px solid #c3e6cb;
        }

        .alert-danger {
            background: #f8d7da;
            color: #721c24;
            border: 1px solid #f5c6cb;
        }

        .medicine-card {
            background: white;
            border: 2px solid #e9ecef;
            border-radius: 10px;
            padding: 20px;
            margin-bottom: 15px;
            transition: all 0.3s ease;
        }

        .medicine-card:hover {
            border-color: #007bff;
            box-shadow: 0 4px 15px rgba(0,123,255,0.1);
        }

        .medicine-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
        }

        .medicine-name {
            font-size: 1.3em;
            font-weight: 600;
            color: #2c3e50;
        }

        .medicine-actions {
            display: flex;
            gap: 10px;
        }

        .medicine-info {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
        }

        .info-item {
            display: flex;
            justify-content: space-between;
            padding: 8px 0;
            border-bottom: 1px solid #f8f9fa;
        }

        .info-label {
            font-weight: 600;
            color: #6c757d;
        }

        .info-value {
            color: #2c3e50;
            font-weight: 500;
        }

        .status-badge {
            padding: 4px 12px;
            border-radius: 20px;
            font-size: 12px;
            font-weight: 600;
            text-transform: uppercase;
        }

        .status-sufficient {
            background: #d4edda;
            color: #155724;
        }

        .status-low {
            background: #fff3cd;
            color: #856404;
        }

        .status-critical {
            background: #f8d7da;
            color: #721c24;
        }

        .empty-state {
            text-align: center;
            padding: 60px 20px;
            color: #6c757d;
        }

        .empty-state h3 {
            margin-bottom: 15px;
            font-size: 1.5em;
        }

        @media (max-width: 768px) {
            .form-row {
                grid-template-columns: 1fr;
            }
            
            .section-header {
                flex-direction: column;
                gap: 15px;
                align-items: stretch;
            }
            
            .medicine-info {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>üè• ‡∏£‡∏∞‡∏ö‡∏ö‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏¢‡∏≤‡∏ô‡∏±‡∏Å‡πÄ‡∏£‡∏µ‡∏¢‡∏ô‡∏õ‡∏£‡∏∞‡∏à‡∏≥</h1>
            <p>‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ô‡∏±‡∏Å‡πÄ‡∏£‡∏µ‡∏¢‡∏ô‡πÅ‡∏•‡∏∞‡∏¢‡∏≤‡∏™‡πà‡∏ß‡∏ô‡∏ï‡∏±‡∏ß‡πÅ‡∏¢‡∏Å‡∏£‡∏≤‡∏¢‡∏ö‡∏∏‡∏Ñ‡∏Ñ‡∏•</p>
        </div>

        <div class="nav-tabs">
            <button class="nav-tab active" onclick="showTab('students')">üë®‚Äçüéì ‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏ô‡∏±‡∏Å‡πÄ‡∏£‡∏µ‡∏¢‡∏ô</button>
            <button class="nav-tab" onclick="showTab('medicines')">üíä ‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏¢‡∏≤‡∏ô‡∏±‡∏Å‡πÄ‡∏£‡∏µ‡∏¢‡∏ô</button>
        </div>

        <div class="content">
            <!-- Tab ‡∏ô‡∏±‡∏Å‡πÄ‡∏£‡∏µ‡∏¢‡∏ô -->
            <div id="students-tab" class="tab-content active">
                <div class="section-header">
                    <h2 class="section-title">üìã ‡∏£‡∏≤‡∏¢‡∏ä‡∏∑‡πà‡∏≠‡∏ô‡∏±‡∏Å‡πÄ‡∏£‡∏µ‡∏¢‡∏ô</h2>
                    <button class="btn btn-primary" onclick="openStudentModal()">
                        ‚ûï ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏ô‡∏±‡∏Å‡πÄ‡∏£‡∏µ‡∏¢‡∏ô‡πÉ‡∏´‡∏°‡πà
                    </button>
                </div>

                <div class="search-box">
                    <input type="text" class="search-input" id="studentSearch" 
                           placeholder="üîç ‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤‡∏ô‡∏±‡∏Å‡πÄ‡∏£‡∏µ‡∏¢‡∏ô (‡∏ä‡∏∑‡πà‡∏≠, ‡∏£‡∏´‡∏±‡∏™, ‡∏´‡πâ‡∏≠‡∏á)..." 
                           onkeyup="searchStudents()">
                </div>

                <div class="table-container">
                    <table id="studentsTable">
                        <thead>
                            <tr>
                                <th>‡∏£‡∏´‡∏±‡∏™‡∏ô‡∏±‡∏Å‡πÄ‡∏£‡∏µ‡∏¢‡∏ô</th>
                                <th>‡∏ä‡∏∑‡πà‡∏≠-‡∏ô‡∏≤‡∏°‡∏™‡∏Å‡∏∏‡∏•</th>
                                <th>‡∏´‡πâ‡∏≠‡∏á</th>
                                <th>‡∏≠‡∏≤‡∏¢‡∏∏</th>
                                <th>‡∏õ‡∏£‡∏∞‡∏ß‡∏±‡∏ï‡∏¥‡πÅ‡∏û‡πâ‡∏¢‡∏≤</th>
                                <th>‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏¢‡∏≤</th>
                                <th>‡∏Å‡∏≤‡∏£‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£</th>
                            </tr>
                        </thead>
                        <tbody id="studentsTableBody">
                        </tbody>
                    </table>
                </div>
            </div>

            <!-- Tab ‡∏¢‡∏≤ -->
            <div id="medicines-tab" class="tab-content">
                <div class="section-header">
                    <h2 class="section-title">üíä ‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏¢‡∏≤‡∏ô‡∏±‡∏Å‡πÄ‡∏£‡∏µ‡∏¢‡∏ô</h2>
                    <div>
                        <select id="studentSelect" class="form-control" style="width: 250px; display: inline-block; margin-right: 15px;" onchange="loadStudentMedicines()">
                            <option value="">-- ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏ô‡∏±‡∏Å‡πÄ‡∏£‡∏µ‡∏¢‡∏ô --</option>
                        </select>
                        <button class="btn btn-success" onclick="openMedicineModal()" id="addMedicineBtn" disabled>
                            ‚ûï ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏¢‡∏≤
                        </button>
                    </div>
                </div>

                <div id="medicinesContainer">
                    <div class="empty-state">
                        <h3>üîç ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏ô‡∏±‡∏Å‡πÄ‡∏£‡∏µ‡∏¢‡∏ô‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏¢‡∏≤</h3>
                        <p>‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏ô‡∏±‡∏Å‡πÄ‡∏£‡∏µ‡∏¢‡∏ô‡∏à‡∏≤‡∏Å‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏î‡πâ‡∏≤‡∏ô‡∏ö‡∏ô‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏î‡∏π‡πÅ‡∏•‡∏∞‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏¢‡∏≤‡∏™‡πà‡∏ß‡∏ô‡∏ï‡∏±‡∏ß</p>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Modal ‡∏ô‡∏±‡∏Å‡πÄ‡∏£‡∏µ‡∏¢‡∏ô -->
    <div id="studentModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2 id="studentModalTitle">‚ûï ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏ô‡∏±‡∏Å‡πÄ‡∏£‡∏µ‡∏¢‡∏ô‡πÉ‡∏´‡∏°‡πà</h2>
                <span class="close" onclick="closeStudentModal()">&times;</span>
            </div>
            <div class="modal-body">
                <form id="studentForm">
                    <div class="form-row">
                        <div class="form-group">
                            <label class="form-label">‡∏£‡∏´‡∏±‡∏™‡∏ô‡∏±‡∏Å‡πÄ‡∏£‡∏µ‡∏¢‡∏ô *</label>
                            <input type="text" id="studentId" class="form-control" required>
                        </div>
                        <div class="form-group">
                            <label class="form-label">‡∏´‡πâ‡∏≠‡∏á *</label>
                            <input type="text" id="studentRoom" class="form-control" required placeholder="‡πÄ‡∏ä‡πà‡∏ô ‡∏°.1/1">
                        </div>
                    </div>

                    <div class="form-row">
                        <div class="form-group">
                            <label class="form-label">‡∏ä‡∏∑‡πà‡∏≠ *</label>
                            <input type="text" id="studentFirstName" class="form-control" required>
                        </div>
                        <div class="form-group">
                            <label class="form-label">‡∏ô‡∏≤‡∏°‡∏™‡∏Å‡∏∏‡∏• *</label>
                            <input type="text" id="studentLastName" class="form-control" required>
                        </div>
                    </div>

                    <div class="form-row">
                        <div class="form-group">
                            <label class="form-label">‡∏≠‡∏≤‡∏¢‡∏∏ *</label>
                            <input type="number" id="studentAge" class="form-control" required min="10" max="25">
                        </div>
                        <div class="form-group">
                            <label class="form-label">‡πÄ‡∏ö‡∏≠‡∏£‡πå‡∏ï‡∏¥‡∏î‡∏ï‡πà‡∏≠‡∏ú‡∏π‡πâ‡∏õ‡∏Å‡∏Ñ‡∏£‡∏≠‡∏á</label>
                            <input type="tel" id="parentPhone" class="form-control" placeholder="08X-XXX-XXXX">
                        </div>
                    </div>

                    <div class="form-group">
                        <label class="form-label">‡∏õ‡∏£‡∏∞‡∏ß‡∏±‡∏ï‡∏¥‡πÅ‡∏û‡πâ‡∏¢‡∏≤</label>
                        <textarea id="allergies" class="form-control" rows="3" 
                                  placeholder="‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏õ‡∏£‡∏∞‡∏ß‡∏±‡∏ï‡∏¥‡∏Å‡∏≤‡∏£‡πÅ‡∏û‡πâ‡∏¢‡∏≤‡∏´‡∏£‡∏∑‡∏≠‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏£‡∏£‡∏∞‡∏ß‡∏±‡∏á..."></textarea>
                    </div>

                    <div class="form-group">
                        <label class="form-label">‡∏´‡∏°‡∏≤‡∏¢‡πÄ‡∏´‡∏ï‡∏∏‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÄ‡∏ï‡∏¥‡∏°</label>
                        <textarea id="studentNotes" class="form-control" rows="2" 
                                  placeholder="‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÄ‡∏ï‡∏¥‡∏°‡πÄ‡∏Å‡∏µ‡πà‡∏¢‡∏ß‡∏Å‡∏±‡∏ö‡∏ô‡∏±‡∏Å‡πÄ‡∏£‡∏µ‡∏¢‡∏ô..."></textarea>
                    </div>

                    <div style="text-align: right; margin-top: 30px;">
                        <button type="button" class="btn" onclick="closeStudentModal()" 
                                style="background: #6c757d; color: white; margin-right: 10px;">‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å</button>
                        <button type="submit" class="btn btn-primary" id="studentSubmitBtn">‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å</button>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <!-- Modal ‡∏¢‡∏≤ -->
    <div id="medicineModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2 id="medicineModalTitle">‚ûï ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏¢‡∏≤‡πÉ‡∏´‡∏°‡πà</h2>
                <span class="close" onclick="closeMedicineModal()">&times;</span>
            </div>
            <div class="modal-body">
                <form id="medicineForm">
                    <div class="form-row">
                        <div class="form-group">
                            <label class="form-label">‡∏ä‡∏∑‡πà‡∏≠‡∏¢‡∏≤ *</label>
                            <input type="text" id="medicineName" class="form-control" required>
                        </div>
                        <div class="form-group">
                            <label class="form-label">‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡πâ‡∏ô *</label>
                            <input type="number" id="medicineQuantity" class="form-control" required min="0" step="0.5">
                        </div>
                    </div>

                    <div class="form-row">
                        <div class="form-group">
                            <label class="form-label">‡∏´‡∏ô‡πà‡∏ß‡∏¢ *</label>
                            <select id="medicineUnit" class="form-control" required>
                                <option value="">-- ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏´‡∏ô‡πà‡∏ß‡∏¢ --</option>
                                <option value="‡πÄ‡∏°‡πá‡∏î">‡πÄ‡∏°‡πá‡∏î</option>
                                <option value="‡πÅ‡∏Ñ‡∏õ‡∏ã‡∏π‡∏•">‡πÅ‡∏Ñ‡∏õ‡∏ã‡∏π‡∏•</option>
                                <option value="‡∏ä‡πâ‡∏≠‡∏ô‡∏ä‡∏≤">‡∏ä‡πâ‡∏≠‡∏ô‡∏ä‡∏≤</option>
                                <option value="‡∏ä‡πâ‡∏≠‡∏ô‡πÇ‡∏ï‡πä‡∏∞">‡∏ä‡πâ‡∏≠‡∏ô‡πÇ‡∏ï‡πä‡∏∞</option>
                                <option value="‡∏°‡∏•.">‡∏°‡∏•.</option>
                                <option value="‡∏´‡∏¢‡∏î">‡∏´‡∏¢‡∏î</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label class="form-label">‡∏ß‡∏±‡∏ô‡∏´‡∏°‡∏î‡∏≠‡∏≤‡∏¢‡∏∏</label>
                            <input type="date" id="medicineExpiry" class="form-control">
                        </div>
                    </div>

                    <div class="form-group">
                        <label class="form-label">‡∏Å‡∏≤‡∏£‡πÉ‡∏´‡πâ‡∏¢‡∏≤ (‡πÄ‡∏ß‡∏•‡∏≤‡πÅ‡∏•‡∏∞‡∏Ç‡∏ô‡∏≤‡∏î)</label>
                        <div id="dosageContainer">
                            <div class="dosage-row" style="display: flex; gap: 10px; margin-bottom: 10px;">
                                <input type="time" class="form-control dosage-time" placeholder="‡πÄ‡∏ß‡∏•‡∏≤" style="flex: 1;">
                                <input type="number" class="form-control dosage-amount" placeholder="‡∏à‡∏≥‡∏ô‡∏ß‡∏ô" step="0.5" min="0" style="flex: 1;">
                                <button type="button" class="btn btn-danger" onclick="removeDosageRow(this)">‡∏•‡∏ö</button>
                            </div>
                        </div>
                        <button type="button" class="btn" onclick="addDosageRow()" 
                                style="background: #28a745; color: white; margin-top: 10px;">+ ‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÄ‡∏ß‡∏•‡∏≤‡πÉ‡∏´‡πâ‡∏¢‡∏≤</button>
                    </div>

                    <div class="form-group">
                        <label class="form-label">‡∏ß‡∏¥‡∏ò‡∏µ‡πÉ‡∏ä‡πâ</label>
                        <textarea id="medicineInstructions" class="form-control" rows="2" 
                                  placeholder="‡πÄ‡∏ä‡πà‡∏ô ‡∏Å‡∏¥‡∏ô‡∏´‡∏•‡∏±‡∏á‡∏≠‡∏≤‡∏´‡∏≤‡∏£, ‡∏Å‡∏¥‡∏ô‡∏Å‡πà‡∏≠‡∏ô‡∏ô‡∏≠‡∏ô..."></textarea>
                    </div>

                    <div class="form-group">
                        <label class="form-label">‡∏´‡∏°‡∏≤‡∏¢‡πÄ‡∏´‡∏ï‡∏∏</label>
                        <textarea id="medicineNotes" class="form-control" rows="2" 
                                  placeholder="‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÄ‡∏ï‡∏¥‡∏°‡πÄ‡∏Å‡∏µ‡πà‡∏¢‡∏ß‡∏Å‡∏±‡∏ö‡∏¢‡∏≤..."></textarea>
                    </div>

                    <div style="text-align: right; margin-top: 30px;">
                        <button type="button" class="btn" onclick="closeMedicineModal()" 
                                style="background: #6c757d; color: white; margin-right: 10px;">‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å</button>
                        <button type="submit" class="btn btn-success" id="medicineSubmitBtn">‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å</button>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <script>
        // ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏™‡πà‡∏ß‡∏ô‡∏Å‡∏•‡∏≤‡∏á
        let students = JSON.parse(localStorage.getItem('students')) || [];
        let medicines = JSON.parse(localStorage.getItem('medicines')) || [];
        let currentEditingStudent = null;
        let currentEditingMedicine = null;
        let currentStudentId = null;

        // ‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡πâ‡∏ô‡∏£‡∏∞‡∏ö‡∏ö
        document.addEventListener('DOMContentLoaded', function() {
            loadStudents();
            updateStudentSelect();
            
            // ‡πÄ‡∏û‡∏¥‡πà‡∏° event listener ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏ü‡∏≠‡∏£‡πå‡∏°
            document.getElementById('studentForm').addEventListener('submit', saveStudent);
            document.getElementById('medicineForm').addEventListener('submit', saveMedicine);
        });

        // ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡πà‡∏ô‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô Tab
        function showTab(tabName) {
            // ‡∏ã‡πà‡∏≠‡∏ô tab ‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î
            document.querySelectorAll('.tab-content').forEach(tab => {
                tab.classList.remove('active');
            });
            document.querySelectorAll('.nav-tab').forEach(tab => {
                tab.classList.remove('active');
            });

            // ‡πÅ‡∏™‡∏î‡∏á tab ‡∏ó‡∏µ‡πà‡πÄ‡∏•‡∏∑‡∏≠‡∏Å
            document.getElementById(tabName + '-tab').classList.add('active');
            event.target.classList.add('active');
        }

        // ===== ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡πà‡∏ô‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏ô‡∏±‡∏Å‡πÄ‡∏£‡∏µ‡∏¢‡∏ô =====
        
        function openStudentModal(studentId = null) {
            const modal = document.getElementById('studentModal');
            const title = document.getElementById('studentModalTitle');
            const submitBtn = document.getElementById('studentSubmitBtn');

            if (studentId) {
                // ‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡∏ô‡∏±‡∏Å‡πÄ‡∏£‡∏µ‡∏¢‡∏ô
                const student = students.find(s => s.id === studentId);
                currentEditingStudent = studentId;
                title.textContent = '‚úèÔ∏è ‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ô‡∏±‡∏Å‡πÄ‡∏£‡∏µ‡∏¢‡∏ô';
                submitBtn.textContent = '‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ï';
                
                // ‡πÉ‡∏™‡πà‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÉ‡∏ô‡∏ü‡∏≠‡∏£‡πå‡∏°
                document.getElementById('studentId').value = student.id;
                document.getElementById('studentRoom').value = student.room;
                document.getElementById('studentFirstName').value = student.firstName;
                document.getElementById('studentLastName').value = student.lastName;
                document.getElementById('studentAge').value = student.age;
                document.getElementById('parentPhone').value = student.parentPhone || '';
                document.getElementById('allergies').value = student.allergies || '';
                document.getElementById('studentNotes').value = student.notes || '';
            } else {
                // ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏ô‡∏±‡∏Å‡πÄ‡∏£‡∏µ‡∏¢‡∏ô‡πÉ‡∏´‡∏°‡πà
                currentEditingStudent = null;
                title.textContent = '‚ûï ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏ô‡∏±‡∏Å‡πÄ‡∏£‡∏µ‡∏¢‡∏ô‡πÉ‡∏´‡∏°‡πà';
                submitBtn.textContent = '‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å';
                document.getElementById('studentForm').reset();
            }

            modal.style.display = 'block';
        }

        function closeStudentModal() {
            document.getElementById('studentModal').style.display = 'none';
            document.getElementById('studentForm').reset();
            currentEditingStudent = null;
        }

        function saveStudent(event) {
            event.preventDefault();
            
            const studentData = {
                id: document.getElementById('studentId').value,
                room: document.getElementById('studentRoom').value,
                firstName: document.getElementById('studentFirstName').value,
                lastName: document.getElementById('studentLastName').value,
                age: parseInt(document.getElementById('studentAge').value),
                parentPhone: document.getElementById('parentPhone').value,
                allergies: document.getElementById('allergies').value,
                notes: document.getElementById('studentNotes').value,
                createdAt: currentEditingStudent ? 
                    students.find(s => s.id === currentEditingStudent).createdAt : 
                    new Date().toISOString()
            };

            if (currentEditingStudent) {
                // ‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ï‡∏ô‡∏±‡∏Å‡πÄ‡∏£‡∏µ‡∏¢‡∏ô
                const index = students.findIndex(s => s.id === currentEditingStudent);
                students[index] = studentData;
                showAlert('‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ï‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ô‡∏±‡∏Å‡πÄ‡∏£‡∏µ‡∏¢‡∏ô‡πÄ‡∏£‡∏µ‡∏¢‡∏ö‡∏£‡πâ‡∏≠‡∏¢‡πÅ‡∏•‡πâ‡∏ß', 'success');
            } else {
                // ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏£‡∏´‡∏±‡∏™‡∏ã‡πâ‡∏≥
                if (students.find(s => s.id === studentData.id)) {
                    showAlert('‡∏£‡∏´‡∏±‡∏™‡∏ô‡∏±‡∏Å‡πÄ‡∏£‡∏µ‡∏¢‡∏ô‡∏ô‡∏µ‡πâ‡∏°‡∏µ‡∏≠‡∏¢‡∏π‡πà‡πÅ‡∏•‡πâ‡∏ß', 'danger');
                    return;
                }
                students.push(studentData);
                showAlert('‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏ô‡∏±‡∏Å‡πÄ‡∏£‡∏µ‡∏¢‡∏ô‡πÉ‡∏´‡∏°‡πà‡πÄ‡∏£‡∏µ‡∏¢‡∏ö‡∏£‡πâ‡∏≠‡∏¢‡πÅ‡∏•‡πâ‡∏ß', 'success');
            }

            localStorage.setItem('students', JSON.stringify(students));
            loadStudents();
            updateStudentSelect();
            closeStudentModal();
        }

        function deleteStudent(studentId) {
            if (confirm('‡∏Ñ‡∏∏‡∏ì‡πÅ‡∏ô‡πà‡πÉ‡∏à‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏°‡πà‡∏ó‡∏µ‡πà‡∏à‡∏∞‡∏•‡∏ö‡∏ô‡∏±‡∏Å‡πÄ‡∏£‡∏µ‡∏¢‡∏ô‡∏Ñ‡∏ô‡∏ô‡∏µ‡πâ?\n(‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏¢‡∏≤‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î‡∏à‡∏∞‡∏ñ‡∏π‡∏Å‡∏•‡∏ö‡∏î‡πâ‡∏ß‡∏¢)')) {
                // ‡∏•‡∏ö‡∏ô‡∏±‡∏Å‡πÄ‡∏£‡∏µ‡∏¢‡∏ô
                students = students.filter(s => s.id !== studentId);
                // ‡∏•‡∏ö‡∏¢‡∏≤‡∏Ç‡∏≠‡∏á‡∏ô‡∏±‡∏Å‡πÄ‡∏£‡∏µ‡∏¢‡∏ô
                medicines = medicines.filter(m => m.studentId !== studentId);
                
                localStorage.setItem('students', JSON.stringify(students));
                localStorage.setItem('medicines', JSON.stringify(medicines));
                
                loadStudents();
                updateStudentSelect();
                
                // ‡∏ñ‡πâ‡∏≤‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏î‡∏π‡∏¢‡∏≤‡∏Ç‡∏≠‡∏á‡∏ô‡∏±‡∏Å‡πÄ‡∏£‡∏µ‡∏¢‡∏ô‡∏ó‡∏µ‡πà‡∏•‡∏ö ‡πÉ‡∏´‡πâ‡∏£‡∏µ‡πÄ‡∏ã‡πá‡∏ï
                if (currentStudentId === studentId) {
                    currentStudentId = null;
                    document.getElementById('studentSelect').value = '';
                    loadStudentMedicines();
                }
                
                showAlert('‡∏•‡∏ö‡∏ô‡∏±‡∏Å‡πÄ‡∏£‡∏µ‡∏¢‡∏ô‡πÄ‡∏£‡∏µ‡∏¢‡∏ö‡∏£‡πâ‡∏≠‡∏¢‡πÅ‡∏•‡πâ‡∏ß', 'success');
            }
        }

        function loadStudents() {
            const tbody = document.getElementById('studentsTableBody');
            tbody.innerHTML = '';

            if (students.length === 0) {
                tbody.innerHTML = `
                    <tr>
                        <td colspan="7" style="text-align: center; padding: 40px; color: #6c757d;">
                            <h4>‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏ô‡∏±‡∏Å‡πÄ‡∏£‡∏µ‡∏¢‡∏ô‡πÉ‡∏ô‡∏£‡∏∞‡∏ö‡∏ö</h4>
                            <p>‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡πâ‡∏ô‡∏î‡πâ‡∏ß‡∏¢‡∏Å‡∏≤‡∏£‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏ô‡∏±‡∏Å‡πÄ‡∏£‡∏µ‡∏¢‡∏ô‡∏Ñ‡∏ô‡πÅ‡∏£‡∏Å</p>
                        </td>
                    </tr>
                `;
                return;
            }

            students.forEach(student => {
                const studentMedicines = medicines.filter(m => m.studentId === student.id);
                const medicineCount = studentMedicines.length;
                
                const row = tbody.insertRow();
                row.innerHTML = `
                    <td><strong>${student.id}</strong></td>
                    <td>${student.firstName} ${student.lastName}</td>
                    <td><span class="status-badge status-sufficient">${student.room}</span></td>
                    <td>${student.age} ‡∏õ‡∏µ</td>
                    <td>${student.allergies ? '‚ö†Ô∏è ‡∏°‡∏µ' : '‚úÖ ‡πÑ‡∏°‡πà‡∏°‡∏µ'}</td>
                    <td><strong>${medicineCount}</strong> ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£</td>
                    <td>
                        <button class="btn btn-warning" onclick="openStudentModal('${student.id}')" 
                                style="margin-right: 5px; padding: 8px 12px;">
                            ‚úèÔ∏è ‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç
                        </button>
                        <button class="btn btn-danger" onclick="deleteStudent('${student.id}')"
                                style="padding: 8px 12px;">
                            üóëÔ∏è ‡∏•‡∏ö
                        </button>
                    </td>
                `;
            });
        }

        function searchStudents() {
            const searchTerm = document.getElementById('studentSearch').value.toLowerCase();
            const rows = document.querySelectorAll('#studentsTableBody tr');

            rows.forEach(row => {
                const text = row.textContent.toLowerCase();
                row.style.display = text.includes(searchTerm) ? '' : 'none';
            });
        }

        // ===== ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡πà‡∏ô‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏¢‡∏≤ =====

        function updateStudentSelect() {
            const select = document.getElementById('studentSelect');
            select.innerHTML = '<option value="">-- ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏ô‡∏±‡∏Å‡πÄ‡∏£‡∏µ‡∏¢‡∏ô --</option>';

            students.forEach(student => {
                const option = document.createElement('option');
                option.value = student.id;
                option.textContent = `${student.id} - ${student.firstName} ${student.lastName} (${student.room})`;
                select.appendChild(option);
            });
        }

        function loadStudentMedicines() {
            const studentId = document.getElementById('studentSelect').value;
            const container = document.getElementById('medicinesContainer');
            const addBtn = document.getElementById('addMedicineBtn');

            currentStudentId = studentId;

            if (!studentId) {
                container.innerHTML = `
                    <div class="empty-state">
                        <h3>üîç ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏ô‡∏±‡∏Å‡πÄ‡∏£‡∏µ‡∏¢‡∏ô‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏¢‡∏≤</h3>
                        <p>‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏ô‡∏±‡∏Å‡πÄ‡∏£‡∏µ‡∏¢‡∏ô‡∏à‡∏≤‡∏Å‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏î‡πâ‡∏≤‡∏ô‡∏ö‡∏ô‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏î‡∏π‡πÅ‡∏•‡∏∞‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏¢‡∏≤‡∏™‡πà‡∏ß‡∏ô‡∏ï‡∏±‡∏ß</p>
                    </div>
                `;
                addBtn.disabled = true;
                return;
            }

            addBtn.disabled = false;
            const student = students.find(s => s.id === studentId);
            const studentMedicines = medicines.filter(m => m.studentId === studentId);

            if (studentMedicines.length === 0) {
                container.innerHTML = `
                    <div class="empty-state">
                        <h3>üíä ‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏¢‡∏≤‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö ${student.firstName} ${student.lastName}</h3>
                        <p>‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡πâ‡∏ô‡∏î‡πâ‡∏ß‡∏¢‡∏Å‡∏≤‡∏£‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏¢‡∏≤‡∏ä‡∏ô‡∏¥‡∏î‡πÅ‡∏£‡∏Å</p>
                    </div>
                `;
                return;
            }

            let html = '';
            studentMedicines.forEach(medicine => {
                const statusClass = getStockStatus(medicine.currentQuantity);
                const dosageText = medicine.dosages ? 
                    medicine.dosages.map(d => `${d.time} - ${d.amount} ${medicine.unit}`).join(', ') : 
                    '‡πÑ‡∏°‡πà‡∏£‡∏∞‡∏ö‡∏∏';

                html += `
                    <div class="medicine-card">
                        <div class="medicine-header">
                            <div class="medicine-name">${medicine.name}</div>
                            <div class="medicine-actions">
                                <button class="btn btn-warning" onclick="openMedicineModal('${medicine.id}')"
                                        style="padding: 8px 12px;">
                                    ‚úèÔ∏è ‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç
                                </button>
                                <button class="btn btn-danger" onclick="deleteMedicine('${medicine.id}')"
                                        style="padding: 8px 12px;">
                                    üóëÔ∏è ‡∏•‡∏ö
                                </button>
                            </div>
                        </div>
                        <div class="medicine-info">
                            <div class="info-item">
                                <span class="info-label">‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏Ñ‡∏á‡πÄ‡∏´‡∏•‡∏∑‡∏≠:</span>
                                <span class="info-value">
                                    <strong>${medicine.currentQuantity} ${medicine.unit}</strong>
                                    <span class="status-badge ${statusClass}">
                                        ${getStockStatusText(medicine.currentQuantity)}
                                    </span>
                                </span>
                            </div>
                            <div class="info-item">
                                <span class="info-label">‡∏ß‡∏±‡∏ô‡∏´‡∏°‡∏î‡∏≠‡∏≤‡∏¢‡∏∏:</span>
                                <span class="info-value">${medicine.expiryDate || '‡πÑ‡∏°‡πà‡∏£‡∏∞‡∏ö‡∏∏'}</span>
                            </div>
                            <div class="info-item">
                                <span class="info-label">‡πÄ‡∏ß‡∏•‡∏≤‡πÉ‡∏´‡πâ‡∏¢‡∏≤:</span>
                                <span class="info-value">${dosageText}</span>
                            </div>
                            <div class="info-item">
                                <span class="info-label">‡∏ß‡∏¥‡∏ò‡∏µ‡πÉ‡∏ä‡πâ:</span>
                                <span class="info-value">${medicine.instructions || '‡πÑ‡∏°‡πà‡∏£‡∏∞‡∏ö‡∏∏'}</span>
                            </div>
                        </div>
                        ${medicine.notes ? `<div style="margin-top: 15px; padding: 10px; background: #f8f9fa; border-radius: 5px;"><strong>‡∏´‡∏°‡∏≤‡∏¢‡πÄ‡∏´‡∏ï‡∏∏:</strong> ${medicine.notes}</div>` : ''}
                    </div>
                `;
            });

            container.innerHTML = html;
        }

        function getStockStatus(quantity) {
            if (quantity <= 5) return 'status-critical';
            if (quantity <= 15) return 'status-low';
            return 'status-sufficient';
        }

        function getStockStatusText(quantity) {
            if (quantity <= 5) return '‡πÉ‡∏Å‡∏•‡πâ‡∏´‡∏°‡∏î';
            if (quantity <= 15) return '‡πÄ‡∏´‡∏•‡∏∑‡∏≠‡∏ô‡πâ‡∏≠‡∏¢';
            return '‡πÄ‡∏û‡∏µ‡∏¢‡∏á‡∏û‡∏≠';
        }

        function openMedicineModal(medicineId = null) {
            if (!currentStudentId) {
                showAlert('‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏ô‡∏±‡∏Å‡πÄ‡∏£‡∏µ‡∏¢‡∏ô‡∏Å‡πà‡∏≠‡∏ô', 'danger');
                return;
            }

            const modal = document.getElementById('medicineModal');
            const title = document.getElementById('medicineModalTitle');
            const submitBtn = document.getElementById('medicineSubmitBtn');

            if (medicineId) {
                // ‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡∏¢‡∏≤
                const medicine = medicines.find(m => m.id === medicineId);
                currentEditingMedicine = medicineId;
                title.textContent = '‚úèÔ∏è ‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏¢‡∏≤';
                submitBtn.textContent = '‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ï';
                
                // ‡πÉ‡∏™‡πà‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÉ‡∏ô‡∏ü‡∏≠‡∏£‡πå‡∏°
                document.getElementById('medicineName').value = medicine.name;
                document.getElementById('medicineQuantity').value = medicine.currentQuantity;
                document.getElementById('medicineUnit').value = medicine.unit;
                document.getElementById('medicineExpiry').value = medicine.expiryDate || '';
                document.getElementById('medicineInstructions').value = medicine.instructions || '';
                document.getElementById('medicineNotes').value = medicine.notes || '';

                // ‡πÇ‡∏´‡∏•‡∏î dosages
                loadDosages(medicine.dosages || []);
            } else {
                // ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏¢‡∏≤‡πÉ‡∏´‡∏°‡πà
                currentEditingMedicine = null;
                title.textContent = '‚ûï ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏¢‡∏≤‡πÉ‡∏´‡∏°‡πà';
                submitBtn.textContent = '‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å';
                document.getElementById('medicineForm').reset();
                resetDosages();
            }

            modal.style.display = 'block';
        }

        function closeMedicineModal() {
            document.getElementById('medicineModal').style.display = 'none';
            document.getElementById('medicineForm').reset();
            currentEditingMedicine = null;
            resetDosages();
        }

        function saveMedicine(event) {
            event.preventDefault();
            
            // ‡∏£‡∏ß‡∏ö‡∏£‡∏ß‡∏° dosages
            const dosages = [];
            const dosageRows = document.querySelectorAll('.dosage-row');
            dosageRows.forEach(row => {
                const time = row.querySelector('.dosage-time').value;
                const amount = row.querySelector('.dosage-amount').value;
                if (time && amount) {
                    dosages.push({ time, amount: parseFloat(amount) });
                }
            });

            const medicineData = {
                id: currentEditingMedicine || 'med_' + Date.now(),
                studentId: currentStudentId,
                name: document.getElementById('medicineName').value,
                currentQuantity: parseFloat(document.getElementById('medicineQuantity').value),
                unit: document.getElementById('medicineUnit').value,
                expiryDate: document.getElementById('medicineExpiry').value,
                dosages: dosages,
                instructions: document.getElementById('medicineInstructions').value,
                notes: document.getElementById('medicineNotes').value,
                createdAt: currentEditingMedicine ? 
                    medicines.find(m => m.id === currentEditingMedicine).createdAt : 
                    new Date().toISOString()
            };

            if (currentEditingMedicine) {
                // ‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ï‡∏¢‡∏≤
                const index = medicines.findIndex(m => m.id === currentEditingMedicine);
                medicines[index] = medicineData;
                showAlert('‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ï‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏¢‡∏≤‡πÄ‡∏£‡∏µ‡∏¢‡∏ö‡∏£‡πâ‡∏≠‡∏¢‡πÅ‡∏•‡πâ‡∏ß', 'success');
            } else {
                medicines.push(medicineData);
                showAlert('‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏¢‡∏≤‡πÉ‡∏´‡∏°‡πà‡πÄ‡∏£‡∏µ‡∏¢‡∏ö‡∏£‡πâ‡∏≠‡∏¢‡πÅ‡∏•‡πâ‡∏ß', 'success');
            }

            localStorage.setItem('medicines', JSON.stringify(medicines));
            loadStudentMedicines();
            closeMedicineModal();
        }

        function deleteMedicine(medicineId) {
            if (confirm('‡∏Ñ‡∏∏‡∏ì‡πÅ‡∏ô‡πà‡πÉ‡∏à‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏°‡πà‡∏ó‡∏µ‡πà‡∏à‡∏∞‡∏•‡∏ö‡∏¢‡∏≤‡∏ô‡∏µ‡πâ?')) {
                medicines = medicines.filter(m => m.id !== medicineId);
                localStorage.setItem('medicines', JSON.stringify(medicines));
                loadStudentMedicines();
                showAlert('‡∏•‡∏ö‡∏¢‡∏≤‡πÄ‡∏£‡∏µ‡∏¢‡∏ö‡∏£‡πâ‡∏≠‡∏¢‡πÅ‡∏•‡πâ‡∏ß', 'success');
            }
        }

        // ===== ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡πà‡∏ô Dosage =====

        function addDosageRow() {
            const container = document.getElementById('dosageContainer');
            const newRow = document.createElement('div');
            newRow.className = 'dosage-row';
            newRow.style.display = 'flex';
            newRow.style.gap = '10px';
            newRow.style.marginBottom = '10px';
            newRow.innerHTML = `
                <input type="time" class="form-control dosage-time" placeholder="‡πÄ‡∏ß‡∏•‡∏≤" style="flex: 1;">
                <input type="number" class="form-control dosage-amount" placeholder="‡∏à‡∏≥‡∏ô‡∏ß‡∏ô" step="0.5" min="0" style="flex: 1;">
                <button type="button" class="btn btn-danger" onclick="removeDosageRow(this)">‡∏•‡∏ö</button>
            `;
            container.appendChild(newRow);
        }

        function removeDosageRow(button) {
            button.parentElement.remove();
        }

        function resetDosages() {
            const container = document.getElementById('dosageContainer');
            container.innerHTML = `
                <div class="dosage-row" style="display: flex; gap: 10px; margin-bottom: 10px;">
                    <input type="time" class="form-control dosage-time" placeholder="‡πÄ‡∏ß‡∏•‡∏≤" style="flex: 1;">
                    <input type="number" class="form-control dosage-amount" placeholder="‡∏à‡∏≥‡∏ô‡∏ß‡∏ô" step="0.5" min="0" style="flex: 1;">
                    <button type="button" class="btn btn-danger" onclick="removeDosageRow(this)">‡∏•‡∏ö</button>
                </div>
            `;
        }

        function loadDosages(dosages) {
            const container = document.getElementById('dosageContainer');
            container.innerHTML = '';
            
            if (dosages.length === 0) {
                resetDosages();
                return;
            }

            dosages.forEach(dosage => {
                const row = document.createElement('div');
                row.className = 'dosage-row';
                row.style.display = 'flex';
                row.style.gap = '10px';
                row.style.marginBottom = '10px';
                row.innerHTML = `
                    <input type="time" class="form-control dosage-time" value="${dosage.time}" style="flex: 1;">
                    <input type="number" class="form-control dosage-amount" value="${dosage.amount}" step="0.5" min="0" style="flex: 1;">
                    <button type="button" class="btn btn-danger" onclick="removeDosageRow(this)">‡∏•‡∏ö</button>
                `;
                container.appendChild(row);
            });
        }

        // ===== ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡πà‡∏ô‡∏ó‡∏±‡πà‡∏ß‡πÑ‡∏õ =====

        function showAlert(message, type) {
            // ‡∏™‡∏£‡πâ‡∏≤‡∏á alert element
            const alert = document.createElement('div');
            alert.className = `alert alert-${type}`;
            alert.textContent = message;
            alert.style.position = 'fixed';
            alert.style.top = '20px';
            alert.style.right = '20px';
            alert.style.zIndex = '9999';
            alert.style.minWidth = '300px';
            alert.style.boxShadow = '0 4px 12px rgba(0,0,0,0.2)';

            document.body.appendChild(alert);

            // ‡∏•‡∏ö‡∏´‡∏•‡∏±‡∏á 3 ‡∏ß‡∏¥‡∏ô‡∏≤‡∏ó‡∏µ
            setTimeout(() => {
                if (alert.parentNode) {
                    alert.parentNode.removeChild(alert);
                }
            }, 3000);
        }

        // ‡∏õ‡∏¥‡∏î modal ‡πÄ‡∏°‡∏∑‡πà‡∏≠‡∏Ñ‡∏•‡∏¥‡∏Å‡∏ô‡∏≠‡∏Å modal
        window.addEventListener('click', function(event) {
            const studentModal = document.getElementById('studentModal');
            const medicineModal = document.getElementById('medicineModal');
            
            if (event.target === studentModal) {
                closeStudentModal();
            }
            if (event.target === medicineModal) {
                closeMedicineModal();
            }
        });
    </script>
</body>
</html>
